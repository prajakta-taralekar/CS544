{"version":3,"sources":["html-content.mjs","accounts-app.mjs","ws.mjs","../node_modules/cs544-js-utils/src/utils.mjs","../node_modules/cs544-js-utils/src/validator.mjs","../node_modules/cs544-js-utils/main.mjs","util.mjs","defs.mjs","accounts-services.mjs","index.mjs","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["makeSearchResult","id","holderId","selfHref","element","makeElement","class","innerHTML","makeAccountDetail","balance","console","assert","balanceText","toFixed","extendId","makeScrollElement","links","scroll","rel","text","Object","entries","prev","next","link","find","attr","href","control","append","tagName","attrs","document","createElement","k","v","setAttribute","length","IDS","create","search","detail","STYLE","HTML","makeAccountsAppElement","services","ws","extendFn","customElements","define","makeAccountsClass","HTMLElement","constructor","attachShadow","mode","shadowRoot","select","setNavHandlers","setCreateHandler","setSearchHandler","accounts","searchAccounts","log","state","s","sectionId","sectionElement","querySelector","classList","remove","add","setupNavClickHandlers","type","querySelectorAll","addEventListener","getAccountDetails","accountUrl","formElem","response","get","reportErrors","result","accountDetail","extendFnElem","form","e","preventDefault","data","fromEntries","FormData","target","resp","newAccount","formInputs","input","displayResults","res","searchResultElem","scrollElem","anchor","elmes","item","elem","push","getAttribute","scrollElem2","anchor2","hideOldData","oldDivs","div","url","undefined","clearErrors","errors","genErrors","errs","Array","err","msg","message","toString","widget","options","errElement","forEach","makeWs","Ws","_urlBase","params","_post","BASE","info","newAct","query","statement","path","q","URL","key","value","searchParams","set","fetch","json","error","method","headers","body","JSON","stringify","ok","AppErrors","args","isArray","isError","map","join","makeValidator","validationSpecs","Validator","specs","_specs","validate","cmd","obj","spec","code","fields","val","valIsErr","required","valueError","name","default","idVal","checkField","fieldVal","fieldSpec","topVal","chk","RegExp","m","match","index","indexOf","call","SAFE_CHARS_REGEX","test","valFn","valStr","trim","MONTHS_30","Set","isLeapYear","year","getDate","yyyymmdd","_","yyyy","mm","dd","month","day","Number","isBadDate","has","getPositiveInt","intStr","getCents","numStr","replace","genId","RAND_LEN","seq","String","Math","random","DEFAULT_COUNT","makeAccountsServices","dao","checker","CMDS","fn","nonEmpties","filter","valid","keys","c","chkDate","doc","count","amount","date","memo","actId","memoText","fromDate","toDate","DEFAULT_WS_URL","getWsUrl","locationUrl","window","location","main","accountId","elementId","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","onmessage","event","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","appendChild","getElementById","stackTrace","innerText","getParents","modules","parents","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArFA;AAuFO,MAAMC,IAAI,GAAI;AACrB,IAAID,KAAM;AACV;AACA,gBAAgBJ,GAAG,CAACC,MAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgBD,GAAG,CAACE,MAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgBF,GAAG,CAACG,MAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA1DO;;;;;;;;;;ACjKP;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASG,sBAAT,CAAgCC,QAAhC,EAA0CC,EAA1C,EAA8CC,QAA9C,EAAwD;AACrEC,EAAAA,cAAc,CAACC,MAAf,CACE,cADF,EAEEC,iBAAiB,CAACL,QAAD,EAAWC,EAAX,EAAeC,QAAf,CAFnB;AAID;AAED;AACA;AACA;;;AACA,SAASG,iBAAT,CAA2BL,QAA3B,EAAqCC,EAArC,EAAyCC,QAAzC,EAAmD;AACjD,SAAO,cAAcI,WAAd,CAA0B;AAC/BC,IAAAA,WAAW,GAAG;AACZ;AACA,WAAKC,YAAL,CAAkB;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAlB,EAFY,CAGZ;;AACA,WAAKC,UAAL,CAAgBhD,SAAhB,GAA4BoC,iBAA5B;AACA,WAAKa,MAAL,CAAY,QAAZ;AACA,WAAKC,cAAL;AACA,WAAKC,gBAAL;AACA,WAAKC,gBAAL;;AACA,OAAC,YAAY;AACX,cAAMC,QAAQ,GAAG,MAAMf,QAAQ,CAAC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","file":"src.bbc6c1c7.js","sourceRoot":"../src","sourcesContent":["/** Return an element which represents an account search-result\n *  for account having id and holderId and WS url selfHref.\n */\nexport function makeSearchResult(id, holderId, selfHref) {\n  const element = makeElement('div', {class: 'account-result', id });\n  element.innerHTML = `\n    <dl>\n      <dt>Account ID:</dt><dd>${id}</dd>\n      <dt>Holder ID:</dt><dd>${holderId}</dd>\n    </dl>\n    <div>\n      <a class=\"details\" href=\"#\" data-ws-href=\"${selfHref}\" \n         rel=\"describedby\">\n        Details\n      </a>\n    </div>\n  `;\n  return element;\n}\n\n/** Return an element which represents account detail for\n *  account having id, holderId and balance.\n */\nexport function makeAccountDetail(id, holderId, balance) {\n  console.assert(typeof balance === 'number',\n\t\t `account balance \"${balance}\" has type ${typeof balance}`);\n  const balanceText = balance.toFixed(2);\n  const element = makeElement('div', {class: 'account-detail', id });\n  const extendId = `extend-${id}`;\n  element.innerHTML = `\n    <dl>\n      <dt>Account ID:</dt><dd>${id}</dd>  \n      <dt>Holder ID:</dt><dd>${holderId}</dd>\n      <dt>Balance:</dt><dd>${balanceText}</dd>\n    </dl>\n    <div id=\"${extendId}\" data-id=\"${id}\" class=\"extendFn\">extendFn</div>\n  `;\n  return element;\n}\n\nexport function makeScrollElement(links) {\n  const scroll = makeElement('div', { class: 'scroll' }, '');\n  for (const [rel, text] of Object.entries({prev: '<<', next: '>>'})) {\n    const link = links.find(link => link.rel === rel);\n    if (link) {\n      const attr = { href: '#', 'data-ws-href': link.href, rel };\n      const control = makeElement('a', attr, text);\n      scroll.append(control);\n    }\n  }\n  return scroll;\n}\n    \n/** Return a new DOM element with specified tagName, attributes\n *  given by object attrs and contained text.\n */\nexport function makeElement(tagName, attrs={}, text='') {\n  const element = document.createElement(tagName);\n  for (const [k, v] of Object.entries(attrs)) {\n    element.setAttribute(k, v);\n  }\n  if (text.length > 0) element.append(text);\n  return element;\n}\n\n\n\nexport const IDS = {\n  create: 'create-section',\n  search: 'search-section',\n  detail: 'detail-section',\n};\n\n\nconst STYLE = `\n  <style type=\"text/css\">\n\n    nav ul {\n      list-style-type: none;\n      display: inline;\n    }\n\n    .nav-create {\n      float: left;\n    }\n\n    .nav-search {\n      float: right;\n    }\n\n    .heading {\n      font-weight: bold;\n    }\n\n    button {\n      border-radius: 10px;\n      background-color: var(--light);\n      padding: 5px;\n      border-color: var(--dark);\n      color: var(--darkest);\n    }\n\n\n    button:hover {\n      background-color: var(--dark);\n      color: white;\n    }\n\n    .form-grid2 {\n      display: grid;\n      grid-template-columns: 0.5fr 1fr;\n      grid-gap: 2vw;\n    }\n\n    .scroll {\n      font-size: 150%;\n      padding: 10pt 0pt;\n      width: 100;\n    }\n    \n    .scroll a[rel=\"prev\"] {\n      float: left;\n    }\n\n    .scroll a[rel=\"next\"] {\n      float: right;\n    }\n\n    .account-result, .account-detail {\n      width: 70%;\n      margin: 10px;\n      padding: 10px;\n      background-color: white;\n      border: 2px solid blue;\n    }\n\n    .account-result dl, .account-detail dl {\n      display: grid;\n      grid-template-columns: 0.5fr 1fr;\n      grid-gap: 1vw;\n    }\n\n    input, textarea, select {\n      width: 50%;\n    }\n\n    label {\n      font-weight: bold;\n      text-align: right;\n    }\n\n    .invisible {\n      display: none;\n    }\n\n    .error {\n      color: red;\n    }\n  </style>\n`;\n\nexport const HTML = `\n  ${STYLE}\n\n  <section id=${IDS.create}>\n    <h2 class=\"heading\">Create Account</h2>\n    <nav>\n      <ul>\n        <li class=\"nav-search\"><a href=\"#\">Search Accounts</a></li>\n      </ul>\n    </nav>\n    <ul class=\"errors\"></ul>\n    <form id=\"create-form\" class=\"form-grid2\">\n      <label for=\"create-holderId\">Holder ID</label>\n      <span>\n        <input id=\"create-holderId\" name=\"holderId\" id><br>\n        <span class=\"error\" data-widget=\"holderId\"></span>\n      </span>\n      <span>&nbsp;</span>\n      <button type=\"submit\">Create Account</button>\n    </form>\n   </section>\n\n  <section id=${IDS.search}>\n    <h2 class=\"heading\">Search Accounts</h2>\n    <nav>\n      <ul>\n        <li class=\"nav-create\"><a href=\"#\">Create Account</a></li>\n      </ul>\n    </nav>\n    <ul class=\"errors\"></ul>\n    <form id=\"search-form\" class=\"form-grid2\">\n      <label for=\"search-id\">Account ID</label>\n      <span>\n        <input id=\"search-id\" name=\"id\"><br>\n        <span class=\"error\" data-widget=\"id\"></span>\n      </span>\n      <label for=\"search-holderId\">Holder ID</label>\n      <span>\n        <input id=\"search-holderId\" name=\"holderId\" id><br>\n        <span class=\"error\" data-widget=\"holderId\"></span>\n      </span>\n    </form>\n    <p id=\"search-results\"></p>\n  </section>\n\n  <section id=${IDS.detail}>\n    <h2 class=\"heading\">Account Detail</h2>\n    <nav>\n      <ul>\n        <li class=\"nav-create\"><a href=\"#\">Create Account</a></li>\n        <li class=\"nav-search\"><a href=\"#\">Search Accounts</a></li>\n      </ul>\n    </nav>\n    <ul class=\"errors\"></ul>\n    <p id=\"account-detail\"></p>\n  </section>\n   \n\n`;\n","import {\n  HTML, //static HTML for overall app\n\n  //functions which help build dynamic HTML\n  makeSearchResult,\n  makeAccountDetail,\n  makeScrollElement,\n  makeElement,\n  IDS, //mapping from application state to HTML section id's.\n} from \"./html-content.mjs\";\n\n/** Calling this function creates a custom <accounts-app> web\n *  component based an account-services services, web services\n *  ws and function extendFn.  The last argument is used to\n *  extend this solution for Project 5.  The function should\n *  be set up as the click handler for a extendFn element in\n *  the account-details and should be called with 2 arguments:\n *  the account-id and the HTML id of the extendFn element.\n */\nexport default function makeAccountsAppElement(services, ws, extendFn) {\n  customElements.define(\n    \"accounts-app\",\n    makeAccountsClass(services, ws, extendFn)\n  );\n}\n\n/** By defining the component class within a closure we can allow\n *  the code in the class to access the parameters of this function.\n */\nfunction makeAccountsClass(services, ws, extendFn) {\n  return class extends HTMLElement {\n    constructor() {\n      super();\n      this.attachShadow({ mode: \"open\" });\n      //must always use this.shadowRoot to add to component\n      this.shadowRoot.innerHTML = HTML;\n      this.select(\"search\");\n      this.setNavHandlers();\n      this.setCreateHandler();\n      this.setSearchHandler();\n      (async () => {\n        const accounts = await services.searchAccounts({});\n\t      console.log('the account are =====', accounts)\n      })()\n    }\n\n    /** Set state of app, where state is one of 'search', 'create' or\n     *  'detail'.  Ensure that only the section corresponding to the\n     *  selected state is visible by adding the 'invisible' class to\n     *  other sections and ensuring that the 'invisible' class is not\n     *  present on the selected section.\n     */\n    select(state) {\n      for (const [s, sectionId] of Object.entries(IDS)) {\n        const sectionElement = this.shadowRoot.querySelector(`#${sectionId}`);\n        if (s === state) {\n          sectionElement.classList.remove(\"invisible\");\n          this.sectionElement = sectionElement;\n        } else {\n          sectionElement.classList.add(\"invisible\");\n        }\n      }\n    }\n\n    /** Set up click handlers for the create and search navigation links\n     *  at the start of each app section which select()'s the clicked\n     *  on section.\n     */\n    setupNavClickHandlers(type) {\n      const links = this.shadowRoot.querySelectorAll(`.nav-${type} > a`);\n      for (const link of links) {\n        link.addEventListener(\"click\", () => this.select(type));\n      }\n    }\n    setNavHandlers() {\n      //TODO\n\n      this.setupNavClickHandlers(\"create\"); // Nav linking for create links\n      this.setupNavClickHandlers(\"search\"); // Nav linking for search links\n    }\n\n    async getAccountDetails(accountUrl, formElem) {\n      const response = await ws.get(accountUrl);\n      console.log(\"the response is ======\", response);\n      if (!reportErrors(response, formElem)) {\n        const { id, holderId, balance } = response.result;\n        const element = makeAccountDetail(id, holderId, balance);\n        const accountDetail = this.shadowRoot.querySelector(`#${IDS.detail}`);\n        accountDetail.append(element);\n\tconst extendFnElem = this.shadowRoot.querySelector(`#extend-${id}`)\n\textendFnElem.addEventListener('click', () => {\n\t  extendFn(id, `extend-${id}`)\n\t  console.log(`extend account ${id} at elementId extend-${id}`)\n\t})\n        this.select(\"detail\");\n      }\n    }\n\n    /** Set up a handler for submission of the create-form.  Ensure\n     *  that the form is not submitted to the server the form-data is\n     *  submitted via the newAccount() web services.  If there are no\n     *  errors, the detail section is selected with the details of the\n     *  newly created account.\n     */\n    setCreateHandler() {\n      const form = this.shadowRoot.querySelector(\"#create-form\");\n\n      form.addEventListener(\"submit\", async (e) => {\n        e.preventDefault();\n        const data = Object.fromEntries(new FormData(e.target).entries());\n        const resp = await services.newAccount(data);\n        if (!reportErrors(resp, form)) {\n          await this.getAccountDetails(resp, form);\n        }\n      });\n    }\n\n    /** Create handler for blur event on search-form input widgets.\n     */\n    setSearchHandler() {\n      //TODO\n\t  \n      const formInputs = this.shadowRoot.querySelectorAll(\"#search-form  input\");\n\t\t\t\t\t\tconsole.log('the form  input are =====', formInputs)\n\t    for (const input of formInputs) {\n\t\t    input.addEventListener(\"blur\", () => {\n\t\t\t\t\t\t\t\tthis.search()\n\t\t\t\t})\n\t    }\n    }\n\n\t\t\t\tdisplayResults(res, searchResultElem) {\n\t\t\t\t\t\t\t\tconst scrollElem = makeScrollElement(res.links)\n\t\t\t\t\t\t\t\tconst anchor = scrollElem.querySelector('a')\n\t\t\t\t\t\t\t\tsearchResultElem.append(scrollElem);\n\t\t\t\t\t\t\t\tconst elmes = []\n\t\t\t\t\t\t\t\tfor (const item of res.result) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst {id, holderId} = item.result;\n\t\t\t\t\t\t\t\t\t\t\t\tconst elem = makeSearchResult(id, holderId, item.links[0].href) \n\t\t\t\t\t\t\t\t\t\t\t\telmes.push(elem)\n\t\t\t\t\t\t\t\t\t\t\t\tconst anchor = elem.querySelector('a.details')\n\t\t\t\t\t\t\t\t\t\t\t\tanchor.addEventListener('click', () => this.getAccountDetails(anchor.getAttribute('data-ws-href'), elem))\n\t\t\t\t\t\t\t\t\t\t\t\tsearchResultElem.append(elem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telmes.push(scrollElem)\n\t\t\t\t\t\t\t\tconst scrollElem2 = makeScrollElement(res.links)\n\t\t\t\t\t\t\t\tconst anchor2 = scrollElem.querySelector('a')\n\t\t\t\t\t\t\t\tsearchResultElem.append(scrollElem2);\n\t\t\t\t\t\t\t\telmes.push(scrollElem2)\n\t\t\t\t\t\t\t\tscrollElem.addEventListener('click', () => {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of elmes) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.setAttribute('class', 'invisible')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tthis.search(anchor.getAttribute('data-ws-href'))\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\tscrollElem2.addEventListener('click', () => {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const item of elmes) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//item.setAttribute('class', 'invisible')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tthis.search(anchor2.getAttribute('data-ws-href'))\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t//searchResultElem.append(scrollElem);\n\n\t\t\t\t}\n\t\t\t\t\thideOldData() {\n\t\t\t\t\t\t\t\tconst searchResultElem = this.shadowRoot.querySelector('#search-results')\n\t\t\t\t\t\t\t\t\tconst oldDivs = searchResultElem.querySelectorAll('div')\n\t\t\t\t\t\t\t\t\tfor (const div of oldDivs) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdiv.setAttribute('class', 'invisible')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n    /** Perform an accounts search.  If url is defined (it would be\n     *  a scroll link), then simply perform a get() to that url.  If\n     *  url is undefined, then searchAccounts() using the form-data\n     *  from search-form.  If there are no errors, add the results\n     *  to the results after the search form, including scroll controls\n     *  before/after the actual results.  Then set up handlers for\n     *  the just added scroll controls and the details link within\n     *  each account result in the results.\n     */\n    async search(url = undefined) {\n      //TODO\n\t\t\t\tlet res;\n\t\t\t\t\t\t\t\tconst searchResultElem = this.shadowRoot.querySelector('#search-results')\n\t\t\t\tif(!url) {\n\t\t\t\t\tconst form = this.shadowRoot.querySelector('#search-form')\n\t\t\t\t\t\tconst data = Object.fromEntries(new FormData(form))\n\t\t\t\t\t\tres = await services.searchAccounts(data);\n\t\t\t\t}else {\n\t\t\t\t\t\t\tres =  await ws.get(url)\n\t\t\t\t}\n\t\t\t\t\t\tconsole.log('the res is ==***',url, res);\n\t\t\t\t\t\t\t\tthis.hideOldData()\n\t\t\t\t\t\tif (res.result.length <= 0) {\n\t\t\t\t\t\t\t\t\t\tsearchResultElem.append('No Result');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis.displayResults(res, searchResultElem);\n\t\t\t\t\t\t}\n    }\n\n    //TODO: add auxiliary methods as necessary\n  }; //end of class expression for web component\n} //end function makeAccountsClass\n\n/** Always clears current error messages in sectionElement.  Then it\n *  report errors for result within sectionElement.  Returns true iff\n *  errors are reported.\n */\nfunction reportErrors(result, sectionElement) {\n  clearErrors(sectionElement);\n  if (!result?.errors) return false;\n  const errors = result.errors;\n  const genErrors = sectionElement.querySelector(\".errors\");\n  const errs = errors instanceof Array ? errors : [errors];\n  for (const err of errs) {\n    const msg = err.message ?? err.toString();\n    const widget = err.options?.widget;\n    if (widget) {\n      const errElement = sectionElement.querySelector(\n        `[data-widget=${widget}]`\n      );\n      if (errElement) {\n        errElement.innerHTML = msg;\n        continue;\n      }\n    }\n    genErrors.append(makeElement(\"li\", { class: \"error\" }, msg));\n  }\n  return true;\n}\n\n/** Clear all errors in sectionElement */\nfunction clearErrors(sectionElement) {\n  const genErrors = sectionElement.querySelector(\".errors\");\n  if (genErrors) genErrors.innerHTML = \"\";\n  sectionElement.querySelectorAll(\".error\").forEach((e) => {\n    //clear all error messages in section\n    e.innerHTML = \"\";\n  });\n}\n","//factory function is default export\nexport default function makeWs(url) {\n  return new Ws(url);\n}\n\n//On error, all web services return an object of the form:\n// { errors: [ message, options?: { widget? } ] }.\nclass Ws {\n  //most domain-related services simple delegate to get() or _post().\n\n  /** Create web services based on url (protocol, hostname and port, no\n   *  path).\n   */\n  constructor(url) {\n    this._urlBase = url;\n  }\n\n  /** Use web-services to create a new account based on params { holderId }.\n   *  Returns location header\n   */\n  async newAccount(params) {\n    return this._post(BASE, params);\n    //TODO\n  }\n\n  /** Use web-services to get account info for id.  Successful return\n   *  of the form:\n   *\n   *    { links: [ selfLink ],\n   *      result: { id, holderId, balance: Number, }\n   *    }\n   */\n  async info({ id }) {\n    //TODO: not needed for this project\n  }\n\n  /** Use web-services to search accounts for params { id?, holderId? }.\n   *  If successful, return object of the form:\n   *\n   *  { links: [ SelfLink, NextLink?, PrevLink? ],\n   *    result: [ { links: [ SelfLink ],\n   *                result: { id, holderId },\n   *              },\n   *            ],\n   *  }\n   *\n   * If there are no results, then the returned object should have its\n   * result property set to the empty list [].\n   */\n  async searchAccounts(params = {}) {\n    return await this.get(BASE, params)\n    //TODO\n  }\n\n  async newAct(params) {\n    //TODO: not needed for this project\n  }\n\n  async query(params) {\n    //TODO: not needed for this project\n  }\n\n  async statement(params) {\n    //TODO: not needed for this project\n  }\n\n  /** Perform a GET request for path on this.url using query params q.\n   *  Return returned response (which may be in error even when the\n   *  response is ok)\n   */\n  async get(path, q = {}) {\n    const url = new URL(path, this._urlBase);\n    for (let [key, value] of Object.entries(q)) {\n      url.searchParams.set(key, value);\n    }\n    try {\n      const response = await fetch(url);\n      return await response.json();\n    } catch (error) {\n      console.error(\"the error from get call ---\", error);\n      return { errors: [{ message: error.message }] };\n    }\n  }\n\n  /** Do a POST request for path on this.url using data as body.\n   *  If successful, return the Location header; otherwise\n   *  return a suitable errors response.\n   */\n  async _post(path, data = {}) {\n    //TODO\n    let response;\n    try {\n      response = await fetch(`${this._urlBase}${path}`, {\n        method: \"POST\",\n\theaders: {\n\t\t'Content-Type': 'application/json'\n\t},\n        body: JSON.stringify(data),\n      });\n    } catch (error) {\n      console.error(\"error from post\", error);\n      return { errors: [{ message: error.message }] };\n    }\n    if (response.ok) { //status is 2xx\n      return response.headers.get('Location');\n    }\n    else { //return response errors\n      return await response.json();\n    }\n  }\n}\n\nconst BASE = \"/accounts\";\n","export class AppErrors {\n  constructor() {\n    this.errors = [];\n  }\n\n  add(...args) {\n    console.assert(args.length === 1 || args.length === 2);\n    let message, options;\n    if (args.length === 2) {\n      [ message, options ] = args; \n      this.errors.push({message, options});\n    }\n    else if (Array.isArray(args[0])) {\n      args[0].forEach(err => this.add(err));\n    }\n    else if (args[0].errors) {\n      this.add(args[0].errors);\n    }\n    else {\n      ({ message, options } = args[0]);\n      if (!message) message = args[0].toString();\n      if (!options) options = {};  \n      this.errors.push({message, options});\n    }\n    return this;\n  }\n\n  isError() { return this.errors.length > 0; }\n  \n  toString() { return this.errors.map(e => e.message).join('\\n'); }\n}\n\n","import { AppErrors } from './utils.mjs';\n\nexport default function makeValidator(validationSpecs) {\n  return new Validator(validationSpecs);\n}\n\nclass Validator {\n\n  constructor(specs) {\n    this._specs = specs;\n  }\n\n  validate(cmd, obj={}) {\n    const errors = new AppErrors();\n    const spec = this._specs[cmd];\n    if (!spec) {\n      return errors.add(`unknown command ${cmd}`, { code: 'BAD_REQ' });\n    }\n    else {\n      return validate(cmd, spec, obj, errors);\n    }\n  }\n  \n}\n\nfunction validate(cmd, spec, obj, errors) {\n  const result = { ...obj };\n  const { fields } =  spec;\n  if (!fields) {\n    const message = 'missing \"fields\" property in spec';\n    return errors.add(message, { code: 'INTERNAL' });\n  }\n  for (const [id, spec] of Object.entries(fields)) {\n    let val = obj[id] ?? undefined;\n    let valIsErr = false;\n    if (val === undefined) {\n      if (spec.required) {\n\terrors.add(valueError(val, spec?.name ?? id, id));\n\tvalIsErr = true;\n      }\n      else if (spec?.default) {\n\tval = (typeof spec.default === 'function')\n\t  ? spec.default(id)\n\t  : spec.default;\n      }\n    }\n    if (val !== undefined && !valIsErr) {\n      const idVal = checkField(val.toString(), spec, id, obj, errors);\n      if (!idVal?.errors) result[id] = idVal;\n    }\n  }\n  return errors.isError() ? errors : result;\n}\n\nfunction checkField(fieldVal, fieldSpec, id, topVal, errors) {\n  if (fieldSpec?.chk) {\n    if (fieldSpec.chk.constructor === RegExp) {\n      const m = fieldVal.match(fieldSpec.chk);\n      if (!m || m.index !== 0 || m[0].length !== fieldVal.length) {\n\treturn errors.add(valueError(fieldVal, fieldSpec.name ?? id, id));\n      }\n    }\n    else if (Array.isArray(fieldSpec.chk)) { \n      if (fieldSpec.chk.indexOf(fieldVal) < 0) {\n\treturn errors.add(valueError(fieldVal, fieldSpec.name ?? id, id));\n      }\n    }\n    else if (typeof fieldSpec.chk === 'function') {\n      const msg = fieldSpec.chk.call(topVal, fieldVal, fieldSpec, id);\n      if (msg) {\n\treturn errors.add(msg, { code: 'BAD_VAL', widget: id });\n      }\n    }\n    else {\n      const msg = `bad field chk for field \"${id}\"`;\n      return errors.add(msg, { code: 'INTERNAL', widget: id });\n    }\n  }\n  else if (!SAFE_CHARS_REGEX.test(fieldVal)) {\n    return errors.add(valueError(fieldVal, fieldSpec?.name ?? id, id));\n  }\n  const val = (fieldSpec?.valFn)\n\t      ? fieldSpec.valFn.call(topVal, fieldVal, fieldSpec, id)\n              : fieldVal;\n  return val;\n}\n\n\nfunction valueError(val, name, id) {\n  const message = (val !== undefined)\n\t          ? `bad value \"${val}\" for ${name}`\n           \t  : `missing value for ${name}`;\n  const code = (val !== undefined) ? 'BAD_VAL' : 'BAD_REQ';\n  return { message, options: { code, widget: id } };\n}\n\nfunction valStr(val) { return (val ?? '').toString().trim(); }\n    \nconst SAFE_CHARS_REGEX = /^[\\w\\s\\-\\.\\@\\#\\%\\$\\^\\*\\(\\)\\{\\}\\[\\]\\:\\,\\/\\'\\\"\\!]*$/;\n","export * from './src/utils.mjs';\nexport { default as makeValidator } from './src/validator.mjs';\n","import { AppErrors } from 'cs544-js-utils';\n\n//30 days has September, April, June and November\nconst MONTHS_30 = new Set([9, 4, 6, 11]);\nfunction isLeapYear(year) {\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n};\n\n/** Returns incoming YYYY-MM-DD date yyyymmdd or an errors object */\nexport function getDate(yyyymmdd, errors=new AppErrors()) {\n  const [ _, yyyy, mm, dd ] =\n\tyyyymmdd?.trim()?.match(/^(\\d{4})-(\\d\\d)-(\\d\\d)$/) ?? [];\n  if (dd) {\n    const [ year, month, day ] =  [ Number(yyyy), Number(mm), Number(dd) ];\n    const isBadDate =\n      day < 1 || month < 1 || month > 12 ||\n      day > (MONTHS_30.has(month) ? 30 : 31) ||\n      (month === 2 && day > (isLeapYear(year) ? 29 : 28));\n    if (!isBadDate) return yyyymmdd;\n  }\n  return errors.add(`bad date \"${yyyymmdd}\"`, { code: 'BAD_REQ'});\n}\n\n/** If intStr is an integer of one or more digits, then return it as a\n *  Number; otherwise return a suitable errors object.\n */\nexport function getPositiveInt(intStr, errors=new AppErrors()) {\n  return (intStr?.trim?.().match(/^\\d+$/) && Number(intStr) > 0)\n    ? Number(intStr)\n    : errors.add(`bad value \"${intStr}\": must be a positive integer`, \n\t         { code: 'BAD_REQ' });\n}\n\n/** If numStr looks like a number with 2 digits after the decimal\n *  point, then return integer cents; otherwise return a suitable errors\n *  object.\n */\nexport function getCents(numStr, errors=new AppErrors()) {\n  return (numStr?.trim().match(/^[-+]?\\d+\\.\\d\\d$/))\n    ? Number(numStr.replace('.', ''))\n    : errors.add(`bad amount \"${numStr}\": must be number with 2 decimals`,\n\t\t { code: 'BAD_REQ' });\n}\n\n\n/** Returns a new id which is unique and hard to guess */\nexport const genId = (() => {\n  const RAND_LEN = 2;\n  let seq = 0;\n  return () => String(seq++ + Number(Math.random().toFixed(RAND_LEN)));\n})();\n","//default max number of results to be returned by query()\nexport const DEFAULT_COUNT = 5;\n","import { getDate } from './util.mjs';\nimport { DEFAULT_COUNT } from './defs.mjs';\n\nimport { makeValidator } from 'cs544-js-utils';\n\nexport default function makeAccountsServices(dao) {\n  const checker = makeValidator(CMDS);\n  const fn = cmd => params =>  {\n    const nonEmpties =\n      Object.entries(params).filter(([_, v]) => v?.trim().length > 0);\n    const valid = checker.validate(cmd, Object.fromEntries(nonEmpties));\n    return valid.errors ? valid : dao[cmd].call(dao, valid);\n  };\n  const services =\n    Object.fromEntries(Object.keys(CMDS).map(c => [c, fn(c)]));\n  return services;\n}\n\nfunction chkDate(yyyymmdd) {\n  const chk = getDate(yyyymmdd);\n  return chk.errors ? chk.errors[0].message : '';\n}\n\nconst CMDS = {\n  newAccount: {\n    fields: {\n      holderId: {\n        name: 'account holder ID',\n        required: true,\n      },\n    },\n    doc: `\n      create a new account and return its ID.\n    `,\n  },\n\n  info: {\n    fields: {\n      id: {\n        name: 'account ID',\n        required: true,\n      },\n    },\n    doc: `\n      return { id, holderId, balance } for account identified by id.\n    `,\n  },\n \n  searchAccounts: {\n    fields: {\n      id: {\n        name: 'account ID',\n      },\n      holderId: {\n        name: 'account holder ID',\n      },\n      index: {\n        name: 'start index',\n        chk: /\\d+/,\n        default: '0',\n        valFn: valStr => Number(valStr),\n      },\n      count: {\n        name: 'retrieved count',\n        chk: /\\d+/,\n        default: String(DEFAULT_COUNT),\n        valFn: valStr => Number(valStr),\n      },\n    },\n    doc: `\n      return list of { id, holderId, balance } of accounts\n    `,\n  },\n\n  newAct: {\n    fields: {\n      id: {\n        name: 'account ID',\n        required: true,\n      },\n      amount: {\n        name: 'transaction amount',\n        chk: /[-+]?\\d+\\.\\d\\d/,\n        valFn: valStr => Number(valStr.replace(/\\./, '')),\n        required: true,\n      },\n      date: {\n        name: 'transaction date',\n        chk: chkDate,\n        required: true,\n      },\n      memo: {\n        name: 'transaction memo',\n        required: true,\n      },\n    },\n    doc: `\n      add transaction { amount, date, memo } to account id and\n      return ID of newly created transaction.\n    `,\n  },\n\n  query: {\n    fields: {\n      id: {\n        name: 'account ID',\n        required: true,\n      },\n      actId: {\n        name: 'transaction ID',\n      },\n      date: {\n        name: 'transaction date',\n        chk: chkDate,\n      },\n      memoText: {\n        name: 'memo substring',\n      },\n      index: {\n        name: 'start index',\n        chk: /\\d+/,\n        default: '0',\n        valFn: valStr => Number(valStr),\n      },\n      count: {\n        name: 'retrieved count',\n        chk: /\\d+/,\n        default: String(DEFAULT_COUNT),\n        valFn: valStr => Number(valStr),\n      },\n    },\n    doc: `\n      return list of { actId, amount, date, memo } of transactions\n      for account id.\n    `,\n  },\n    \n  statement: {\n    fields: {\n      id: {\n        name: 'account ID',\n        required: true,\n      },\n      fromDate: {\n        name: 'from date',\n        chk: chkDate,\n      },\n      toDate: {\n        name: 'to date',\n        chk: chkDate,\n      },\n    },\n    doc: `\n      return list of { actId, amount, date, memo, balance } extended\n      transactions for account id between fromDate and toDate.\n    `,\n  },\n    \n};\n","import makeAccountsAppElement from \"./accounts-app.mjs\";\nimport makeWs from \"./ws.mjs\";\nimport makeServices from \"./accounts-services.mjs\";\n\nconst DEFAULT_WS_URL ='https://zdu.binghamton.edu:2345'\n  //\"https://c9551fc7-eac5-455a-9314-bfba396b5440.mock.pstmn.io\"; //'https://zdu.binghamton.edu:2345';\n\n/** Return url set in query param 'ws-url' if present; otherwise\n *  return DEFAULT_WS_URL.\n */\nfunction getWsUrl() {\n  const locationUrl = new URL(window.location.href);\n  return locationUrl.searchParams.get(\"ws-url\") ?? DEFAULT_WS_URL;\n}\n\nfunction main() {\n  const ws = makeWs(getWsUrl());\n  const services = makeServices(ws);\n  const extendFn = (accountId, elementId) => {\n    console.log(`extend account ${accountId} at elementId ${elementId}`);\n  };\n  makeAccountsAppElement(services, ws, extendFn);\n}\n\nmain();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}